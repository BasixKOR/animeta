{% extends "base.html" %}

{% block title %}{{ owner.username }} 사용자 - 애니메타{% endblock %}

{% block nav %}
<h1><a href="{% url user.views.library owner %}">{{ owner.username }} 사용자</a></h1>
{% endblock %}

{% block content %}
<div id="library">
<div id="library-items" class="items-container">
    <div class="items-header">
        <div>
            분류: {{ filter_form.category }}
            {% ifequal owner request.user %}
            <a href="/records/category/">관리</a>
            {% endifequal %}
        </div>
        <div>
            정렬 기준: {{ filter_form.sort_by }}
        </div>
    </div>

    <div class="items">
    {% for item in items %}
        <div class="item item-{{ item.status_type }}">
            <span class="item-title"><a href="{{ item.id }}">{{ item.title }}</a></span>
            <span class="item-status">
                <span class="item-status-type">{{ item.get_status_type_display }}</span>
                {% if item.status %}@ {{ item.get_status_display }}{% endif %}
            </span>
        </div>
    {% endfor %}
    </div>

    <div class="items-footer">
    {{ filter_form.status }}
    </div>
</div>

<div id="library-records" class="records-container">
<div id="library-records-content">
{% for record in records %}
{% include "history.html" with history=record show_work=1 %}
{% endfor %}
</div>
</div>
</div>

<script type="text/javascript">
function fixContainerHeight() {
	$('#library-items, #library-records').height($(window).height() - $('#library').position().top - $('#footer').outerHeight() - 5);
}

$(function() {
	fixContainerHeight();
	$('.item a').click(function(e) { e.preventDefault(); });
	$('.item').click(function() {
    	$('.item').removeClass('s-selected');
    	$(this).addClass('s-selected');
    	$('#library-records-content').load($(this).find('a').attr('href'));
    });
});

$(window).bind('resize', fixContainerHeight);
</script>
{% endblock %}
