{% extends "base.html" %}

{% block title %}{{ owner.username }} 사용자 - 애니메타{% endblock %}

{% block nav %}
<h1><a href="{% url user.views.library owner %}">{{ owner.username }} 사용자</a></h1>
{% endblock %}

{% block content %}
<div id="library">
<div id="library-items" class="items-container">
    <div class="items-header">
        <div>
            분류: <select id="category"></select>
            {% ifequal owner request.user %}
            <a href="/records/category/">관리</a>
            {% endifequal %}
        </div>
        <div>
            정렬 기준: 
            <label><input type="radio" name="order_by" value="date" checked="checked" /> 날짜</label>
            <label><input type="radio" name="order_by" value="title" /> 제목</label>
        </div>
    </div>

    <div class="items">
    </div>

    <div class="items-footer">
    <ul>
        <li><label><input checked="checked" type="checkbox" name="status" value="watching"> 보는 중</label></li>
        <li><label><input type="checkbox" name="status" value="finished"> 완료</label></li>
        <li><label><input type="checkbox" name="status" value="suspended"> 중단</label></li>
        <li><label><input checked="checked" type="checkbox" name="status" value="interested"> 관심 작품</label></li>
    </ul>
    </div>
</div>

<div id="library-content" class="records-container">
</div>
</div>

<script type="text/x-template" id="item-template">
<span class="item-title"><%= item.get('title') %></span>
<span class="item-status">
<% if (item.get('status').type === 'watching') { %>
    <% if (item.get('status').raw_text) { %><%= item.getStatusDisplay() %><% } else { %><%= item.getStatusTypeDisplay() %><% } %>
<% } else { %>
    <span class="item-status-type"><%= item.getStatusTypeDisplay() %></span>
    <% if (item.get('status').raw_text) { %><span class="item-status-at">@</span> <%= item.getStatusDisplay() %><% } %>
<% } %>
</span>
</script>

<script type="text/x-template" id="item-detail-template">
<p><a href="#">&larr; 전체 기록으로 돌아가기</a></p>
<h2 class="item-detail-title"><%= item.get('title') %></h2>
<div id="record-list">
</div>
</script>

<script type="text/x-template" id="record-template">
<p>
    <span class="work"><% if (showTitle) { %><%= record.get('work') %><% } %></span>
    <span class="status"><%= record.get('status').text %></span>
    <span class="updated timeago" title="<%= record.get('updated_at') %>"><%= record.get('updated_at') %></span>
</p>
<% if (record.get('comment')) { %><p class="comment"><%= record.get('comment') %></p><% } %>
</script>

<script type="text/javascript">
var API_BASE = 'http://animeta.net/api/v1/';
var USERNAME = '{{ owner.username|escapejs }}';
$.ajaxSetup({dataType: 'jsonp', jsonp: 'callback'});
</script>
<script type="text/javascript" src="{{ STATIC_URL }}jquery.timeago.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}underscore.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}backbone.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}library.js"></script>
{% endblock %}
